<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Beauty Lab | Dashboard</title>
    <link rel="stylesheet" a href="dashboard.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  </head>
  <body class="body">
    <section>
      <h1 class="title">Dashboard</h1>
      <hr />
      <br />
      <form action="" method="post" class="form">
        <!-- <div class="form-input">
          <label for="service">ID </label>
          <label for="service">Service </label>
          <label for="service">Date </label>
          <label for="service">Time </label>
          <input value="Delete" class="btn-delete" id="btn-delete" />
        </div>
        <div class="form-input">
          <label for="service">ID </label>
          <label for="service">Service </label>
          <label for="service">Date </label>
          <label for="service">Time </label>
          <input value="Delete" class="btn-delete" id="btn-delete" />
        </div> -->
        <div class="form-input">
          <label for="service">ID </label>
          <label for="service">Service </label>
          <label for="service">Date </label>
          <label for="service">Time </label>
          <input value="Delete" class="btn-delete" id="btn-delete" />
        </div>
        <br />
        <p id="demo"></p>
      </form>
    </section>
    <script>
      $(document).ready(function () {
        const xhttp = new XMLHttpRequest();
        xhttp.onload = function () {
          document.getElementById("demo").innerHTML = this.responseText;
        };
        xhttp.open(
          "GET",
          "http://localhost:8080/api/appointment/read.php",
          true
        );
        xhttp.send();
        console.log("send request");
      });

      $("#btn-delete").on("click", function () {
        console.log("delete");
        var postData = {
          id: 26,
        };

        $.ajax({
          url: "http://localhost:8080/api/appointment/delete.php",
          type: "POST",
          data: JSON.stringify(postData),
          contentType: "application/json; charset=utf-8",
          success: function (response, xhr) {
            console.log("success" + response);
            console.log(xhr);
            var response = response;
            if (response) {
              console.log(response);
            } else {
              alert("appointments getting failed");
            }
          },
        });

        // $.ajax({
        //   url: "http://localhost:8080/api/appointment/delete.php",
        //   type: "DELETE",
        //   data: { movie: movie }, //<-----this should be an object.
        //   contentType: "application/json", // <---add this
        //   dataType: "text", // <---update this
        //   success: function (result) {
        //     console.log("success", result);
        //   },
        //   error: function (result) {
        //     console.log("error", result);
        //   },
        // });
      });
    </script>
  </body>
</html>
